<html>
<head>
<link rel="stylesheet" href="style.css">
<title>Well hello there</title>
</head>
<body>
  <button class="red" id="r">
  </button>
  <button class="green" id="g">
  </button>
  <br>
  <button class="yellow" id="y">
  </button>
  <button class="blue" id="b">
  </button>


<p><b>Viae Ruris (Country Roads but in Latin)</b> <br>
Paene caelum, Vesper Virginia<br>
Caeruleos Montes, Shenandoah Flumen<br>
Vita est senex istic, senior quam arbores<br>
Iunior quam montes, aspirat similus flatum<br>
<br>
Viae ruris, duc me domum<br>
Ad locum adtigo<br>
Vesper Virginia, mater montum<br>
Duc me domum, viae ruris<br>
<br>
</p>
<a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ">Click to hear this song</a>
<p style="background-color:Orange;">Testing with colors</p>
</body>
<script>
var highscore =0;
var score = 0;
var order = [];
var buttons= [document.getElementById("r"),document.getElementById("g"),document.getElementById("y"),document.getElementById("b")];
console.log("Highscore: "+highscore);
chooseNext();
function chooseNext()
{
  for (var i=0;i<buttons.length;i++)
  {
    var toReset = buttons[i];
    //toReset.removeEventListener("click", wrong(toCompare.id));
    toReset.removeEventListener("click", function() {toReset.classList.add('lit');window.setTimeout(function(){unlight();console.log("score: "+(++score));correct()},300);});
  }
  order.push(randButton());
  display();
  var chosen = order[order.length-1];
  for(var i=0;i<buttons.length;i++)
  {
    var toCompare=buttons[i];
    if (!(toCompare==chosen))
    {
      //toCompare.addEventListener("click", wrong(toCompare.id));
    }
    else {
      toCompare.addEventListener("click", function() {toCompare.classList.add('lit');window.setTimeout(function(){unlight();console.log("score: "+(++score));correct()},300);});
    }
  }


}
function reset()
{
  if(highscore>score)
  {
    highscore=score;
  }
  score=0;
  order=[];
}
function unlight()
{
  for(var i=0;i<buttons.length;i++)
  {
    buttons[i].classList.remove('lit');
  }
}
function display()
{
  for (var i=0;i<order.length;i++)
  {
    var orderedButton = order[i];
    orderedButton.classList.add("lit");
    setTimeout(() => {orderedButton.classList.remove("lit"); }, 500);
  }
}
function correct()
{
  chooseNext();
}
function wrong (id)
{
  console.log("it has been done");
  var losingButton = document.getElementById(id);;
  if(score>highscore)
  {highscore=score;}
  losingButton.classList.add('lost');
  window.setTimeout(function(){toCompare.classList.remove('lost');console.log("score: "+(score=0))},300);
  losingButton.removeEventListener("click",wrong("toCompare"));
  reset();
}
function myFunc()
{
  console.log("help I'm trapped in a website factory");
}
function randButton()
{
  var randnum = Math.floor(Math.random()*4);
  return buttons[randnum];
}
</script>
</html>
